{"ast":null,"code":"var _jsxFileName = \"/Users/nikhilkumargautam/Desktop/food-distro/src/views/Leaflet.js\";\nimport React from 'react';\nimport { withFirebaseHOC } from '../firebase';\nimport L from 'leaflet';\nimport { Map, TileLayer, Marker, Popup } from 'react-leaflet';\nvar myIcon = L.icon({\n  iconUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=',\n  iconSize: [25, 41],\n  iconAnchor: [12.5, 41],\n  popupAnchor: [0, -41]\n});\n\nclass Leaflet extends React.Component {\n  constructor(props) {\n    super(props); // this.mapRef = React.createRef()\n\n    this.handleClick = e => {\n      this.setState({\n        hasLocation: true,\n        latlng: e.latlng\n      });\n      console.log(this.state.allMarkers);\n    };\n\n    this.handlePopup = () => {\n      this.props.firebase.addMapPoint(this.state.latlng).catch(err => console.log(err));\n    };\n\n    this.state = {\n      allMarkers: [],\n      hasLocation: false,\n      latlng: {\n        lat: 19.076,\n        lng: 72.877\n      },\n      zoom: 13\n    };\n  }\n\n  componentDidMount() {\n    const db = this.props.firebase.db();\n    db.collection('map-data').get().then(snap => {\n      snap.docs.forEach((doc, i) => {\n        console.log(doc.data().latlong);\n        this.setState(state => ({\n          allMarkers: [...state.allMarkers, {\n            lat: doc.data().latlong._lat,\n            lng: doc.data().latlong._long,\n            name: doc.data().name\n          }]\n        }));\n      });\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    const marker = this.state.hasLocation ? React.createElement(Marker, {\n      position: this.state.latlng,\n      icon: myIcon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(Popup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Select this location?\"), React.createElement(\"button\", {\n      onClick: this.handlePopup,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Confirm\"))) : null;\n    let allMarkers = [];\n    this.state.allMarkers.forEach((mark, i) => {\n      console.log(mark);\n      allMarkers.push(React.createElement(Marker, {\n        position: {\n          lat: mark.lat,\n          lng: mark.lng\n        },\n        icon: myIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(Popup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, mark.name))));\n    });\n    return React.createElement(Map, {\n      style: {\n        height: \"800px\"\n      },\n      length: 4,\n      center: this.state.latlng,\n      onClick: this.handleClick,\n      zoom: this.state.zoom,\n      ref: this.mapRef,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(TileLayer, {\n      attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), marker, allMarkers);\n  }\n\n}\n\nexport default withFirebaseHOC(Leaflet);","map":{"version":3,"sources":["/Users/nikhilkumargautam/Desktop/food-distro/src/views/Leaflet.js"],"names":["React","withFirebaseHOC","L","Map","TileLayer","Marker","Popup","myIcon","icon","iconUrl","iconSize","iconAnchor","popupAnchor","Leaflet","Component","constructor","props","handleClick","e","setState","hasLocation","latlng","console","log","state","allMarkers","handlePopup","firebase","addMapPoint","catch","err","lat","lng","zoom","componentDidMount","db","collection","get","then","snap","docs","forEach","doc","i","data","latlong","_lat","_long","name","render","marker","mark","push","height","mapRef"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { withFirebaseHOC } from '../firebase'\nimport L from 'leaflet'\nimport { Map, TileLayer, Marker, Popup } from 'react-leaflet'\n\nvar myIcon = L.icon({\n  iconUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=',\n  iconSize: [25, 41],\n  iconAnchor: [12.5, 41],\n  popupAnchor: [0, -41]\n})\n\nclass Leaflet extends React.Component {\n  constructor(props) {\n    super(props)\n    // this.mapRef = React.createRef()\n    this.state = {\n      allMarkers: [],\n      hasLocation: false,\n      latlng: {\n        lat: 19.076,\n        lng: 72.877,\n      },\n      zoom: 13,\n    }\n  }\n\n  componentDidMount() {\n    const db = this.props.firebase.db()\n    db.collection('map-data').get()\n      .then((snap) => {\n        snap.docs.forEach((doc, i) => {\n          console.log(doc.data().latlong);\n          this.setState(state => ({\n            allMarkers: [...state.allMarkers, {lat: doc.data().latlong._lat, lng: doc.data().latlong._long, name: doc.data().name}]\n          }))\n        })\n      })\n      .catch(err => console.log(err))\n  }\n\n  handleClick = (e) => {\n    this.setState({\n      hasLocation: true,\n      latlng: e.latlng,\n    })\n    console.log(this.state.allMarkers);\n  }\n\n  handlePopup = () => {\n    this.props.firebase.addMapPoint(this.state.latlng)\n      .catch(err => console.log(err))\n  }\n\n  render() {\n    const marker = this.state.hasLocation ? (\n      <Marker position={this.state.latlng} icon={myIcon}>\n        <Popup>\n          <h2>Select this location?</h2>\n          <button onClick={this.handlePopup}>Confirm</button>\n        </Popup>\n      </Marker>\n    ) : null\n\n    let allMarkers = []\n\n    this.state.allMarkers.forEach((mark, i) => {\n      console.log(mark)\n      allMarkers.push((\n        <Marker position={{lat: mark.lat, lng: mark.lng}} icon={myIcon}>\n          <Popup>\n            <h2>{mark.name}</h2>\n          </Popup>\n        </Marker>\n      ))\n    })\n\n\n    return (\n      <Map style={{height: \"800px\"}} length={4} center={this.state.latlng} onClick={this.handleClick} zoom={this.state.zoom} ref={this.mapRef}>\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        {marker}\n        {allMarkers}\n      </Map>\n\n    )\n  }\n}\n\nexport default withFirebaseHOC(Leaflet)\n"]},"metadata":{},"sourceType":"module"}